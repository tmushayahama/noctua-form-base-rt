/* Handle appearance */
.react-flow__handle {
  width: 10px;
  height: 10px;
  background: transparent;
  border: none;
  opacity: 0;
  transition: opacity 0.2s, background-color 0.2s;
}

/* Make handles visible on node hover */
.react-flow__node:hover .react-flow__handle {
  opacity: 1;
  background-color: rgba(99, 102, 241, 0.2);
}

/* Handle hover effect */
.react-flow__handle:hover {
  opacity: 1 !important;
  background-color: rgba(99, 102, 241, 0.7) !important;
  cursor: crosshair;
}

/* Perimeter handle styles */
.perimeter-handle {
  background-color: transparent !important;
  border: none !important;
  width: 5px !important;
  height: 5px !important;
  min-width: 5px !important;
  min-height: 5px !important;
  z-index: 10 !important;
}

/* Specific handle positions */
.react-flow__handle-top {
  top: -2px;
  width: 20px !important;
  height: 5px !important;
  border-radius: 0 !important;
  transform: translate(-50%, 0);
}

.react-flow__handle-bottom {
  bottom: -2px;
  width: 20px !important;
  height: 5px !important;
  border-radius: 0 !important;
  transform: translate(-50%, 0);
}

.react-flow__handle-left {
  left: -2px;
  width: 5px !important;
  height: 20px !important;
  border-radius: 0 !important;
  transform: translate(0, -50%);
}

.react-flow__handle-right {
  right: -2px;
  width: 5px !important;
  height: 20px !important;
  border-radius: 0 !important;
  transform: translate(0, -50%);
}

/* Connection line style */
.react-flow__connection-path {
  stroke: #6366F1;
  stroke-width: 2;
}

/* Edge styles */
.react-flow__edge-path {
  stroke: #6366F1;
  stroke-width: 1.5;
}

.react-flow__edge.selected .react-flow__edge-path,
.react-flow__edge:hover .react-flow__edge-path {
  stroke: #4F46E5;
  stroke-width: 2;
}

/* Animation for connection line */
.animated {
  stroke-dasharray: 5;
  animation: dashdraw 0.5s linear infinite;
}

@keyframes dashdraw {
  from {
    stroke-dashoffset: 10;
  }
}